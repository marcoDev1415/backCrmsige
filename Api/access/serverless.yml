service: token-facebook

plugins:
  - serverless-import-apigateway

custom:
  timezone: 'America/Mexico_City'
  stage: ${sls:stage}
  environment:
    dev:
      accountId: '590183955517'
      restApiId: wq5e58sevb # REST API resource ID. Default is generated by the framework 
      restApiRootResourceId: 2r977p # Root resource ID, represent as / path 

provider:
  name: aws
  runtime: python3.9
  stage: ${opt:stage}
  region: us-east-1
  apiGateway:
    restApiId: ${self:custom.environment.${self:custom.stage}.restApiId}
    restApiRootResourceId: ${self:custom.environment.${self:custom.stage}.restApiRootResourceId}

functions:
  token:
    handler: handler.tx_token
    timeout: 30
    memorySize: 512
    events:
      - http:
          path: /token
          method: get
          cors:
            origin: '*'
            allowCredentials: false
